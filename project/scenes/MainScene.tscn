[gd_scene format=3 uid="uid://ceauub3uvaq3b"]

[ext_resource type="Script" uid="uid://ba8ehwigy3tts" path="res://scripts/viewport.gd" id="1_c6dvc"]
[ext_resource type="PackedScene" uid="uid://dompofcqtehyu" path="res://scenes/levels/Level1.tscn" id="2_611at"]
[ext_resource type="PackedScene" uid="uid://g77fwioa2yhl" path="res://scenes/Player.tscn" id="3_1wiy7"]
[ext_resource type="PackedScene" uid="uid://c75mpd4nm0j8t" path="res://scenes/menus/settings_menu.tscn" id="3_k24pf"]
[ext_resource type="Script" uid="uid://1t7dhn51sw57" path="res://scripts/activate_environment.gd" id="3_ygjfp"]
[ext_resource type="Environment" uid="uid://bywldyytpakno" path="res://ressources/mask_camera_env.tres" id="5_1wiy7"]
[ext_resource type="Script" uid="uid://78yumdgtlfv0" path="res://scripts/dot_cursor.gd" id="5_u1u68"]
[ext_resource type="Shader" path="res://shaders/sobel.gdshader" id="8_u1u68"]

[sub_resource type="BoxShape3D" id="BoxShape3D_611at"]
size = Vector3(50, 0, 50)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1wiy7"]

[sub_resource type="Sky" id="Sky_u1u68"]
sky_material = SubResource("ProceduralSkyMaterial_1wiy7")

[sub_resource type="Environment" id="Environment_x537r"]
sky = SubResource("Sky_u1u68")
ambient_light_source = 3

[sub_resource type="ShaderMaterial" id="ShaderMaterial_x537r"]
shader = ExtResource("8_u1u68")
shader_parameter/outline_thickness = 0.542000001995
shader_parameter/outline_strength = 0.30000001425
shader_parameter/bw_mix = 1.0
shader_parameter/outline_color = Color(0.0654345, 0.028325817, 0.021821236, 1)

[sub_resource type="ViewportTexture" id="ViewportTexture_mjkpp"]
viewport_path = NodePath("CanvasLayer/SubViewport")

[node name="Viewport" type="Node2D" unique_id=1316760191]
script = ExtResource("1_c6dvc")

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=1440051683]

[node name="SubViewport" type="SubViewport" parent="CanvasLayer" unique_id=1387275179]
canvas_item_default_texture_filter = 0
size = Vector2i(1200, 678)

[node name="World" type="Node3D" parent="CanvasLayer/SubViewport" unique_id=592194623]

[node name="Player" parent="CanvasLayer/SubViewport/World" unique_id=1596461741 instance=ExtResource("3_1wiy7")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1589148, 0)
SPEED = 1.0
HEAD_BOB_AMPLITUDE = 0.007
KEY_BIND_PAUSE = "ui_pause"

[node name="Level1" parent="CanvasLayer/SubViewport/World" unique_id=1125609813 instance=ExtResource("2_611at")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.015396714, 0.015347958, -6.866455e-05)

[node name="Floor" type="StaticBody3D" parent="CanvasLayer/SubViewport/World" unique_id=1835376304]

[node name="Collider" type="CollisionShape3D" parent="CanvasLayer/SubViewport/World/Floor" unique_id=1239050556]
shape = SubResource("BoxShape3D_611at")

[node name="Sun" type="DirectionalLight3D" parent="CanvasLayer/SubViewport" unique_id=1555084007]
transform = Transform3D(0.26288852, -0.17172426, -0.9494211, 0.068173535, -0.9782676, 0.19581862, -0.9624147, -0.11620386, -0.24546827, -6.289403, 5.8933, -0.7181077)
light_color = Color(1, 0.85882354, 0.7294118, 1)
shadow_enabled = true

[node name="Environment" type="WorldEnvironment" parent="CanvasLayer/SubViewport" unique_id=361939799]
environment = SubResource("Environment_x537r")
script = ExtResource("3_ygjfp")

[node name="Control" type="Control" parent="CanvasLayer/SubViewport" unique_id=2083149148]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="CenterContainer" type="CenterContainer" parent="CanvasLayer/SubViewport/Control" unique_id=942237872]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="DotCursor" type="Control" parent="CanvasLayer/SubViewport/Control/CenterContainer" unique_id=441371766]
layout_mode = 2
script = ExtResource("5_u1u68")

[node name="MaskViewport" type="SubViewport" parent="CanvasLayer" unique_id=632110184]
size = Vector2i(600, 339)

[node name="ColorMaskCamera3D" type="Camera3D" parent="CanvasLayer/MaskViewport" unique_id=1126684017]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0717633, 0)
cull_mask = 2
environment = ExtResource("5_1wiy7")

[node name="PlayingView" type="TextureRect" parent="." unique_id=1925727974]
z_index = -4096
material = SubResource("ShaderMaterial_x537r")
offset_right = 1152.0
offset_bottom = 648.0
mouse_filter = 2
texture = SubResource("ViewportTexture_mjkpp")
stretch_mode = 5

[node name="Control" type="Control" parent="." unique_id=263671933]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -574.0
offset_bottom = 519.0
grow_horizontal = 2
grow_vertical = 2

[node name="SettingsMenu" parent="Control" unique_id=2087371895 instance=ExtResource("3_k24pf")]
unique_name_in_owner = true
visible = false
layout_mode = 1
offset_left = 574.0
offset_right = 1152.0
offset_bottom = 129.0

[editable path="CanvasLayer/SubViewport/World/Player"]
[editable path="CanvasLayer/SubViewport/World/Player/Head"]
